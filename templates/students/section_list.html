<!-- Paste code here: templates/students/section_list.html -->
<!-- Here, we are creating new html for displaying the Section Data and the Enrollment Data -->
{% extends "students/base.html" %}

{% block title %}
    Section List
{% endblock %}

{% block content %}
  <h2 class="mb-3 mt-3">Section List</h2>

  <!-- Step 1: Create a card for neat presentation -->
  <div class="card mb-4">
    <ul class="list-group list-group-flush">

      <!-- Step 2: Loop through all sections -->
      {% for section_for_loop in section_rows_for_looping %}
        <li class="list-group-item">
          <!-- Later, we can link this to a section detail page -->
          <a href="#">{{ section_for_loop }}</a>
        </li>

      <!-- Step 3: Handle empty table case -->
      {% empty %}
        <li class="list-group-item text-muted"><em>No sections yet!</em></li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}


{% block stats %}
  <!-- NEW: Stats and charts area for Week 7 -->
  <hr class="my-4">

  <h5 class="mb-3">Section Statistics</h5>

  <div class="row g-3">
    <div class="col-12 col-md-6">
      <div class="card h-100">
        <div class="card-header py-2"><strong>Students per Section</strong></div>
        <div class="card-body p-0">
          <table class="table table-sm table-striped mb-0">
            <thead class="table-light">
              <tr><th>Section</th><th class="text-end">Students</th></tr>
            </thead>
            <tbody>
              {% for row in students_per_section %}
                <tr>
                  <td>{{ row.code }} — {{ row.name }}</td>
                  <td class="text-end">{{ row.n_students }}</td>
                </tr>
              {% empty %}
                <tr><td colspan="2" class="text-muted"><em>No sections.</em></td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-12 col-md-6">
      <div class="card h-100">
        <div class="card-header py-2"><strong>Students per Term</strong></div>
        <div class="card-body p-0">
          <table class="table table-sm table-striped mb-0">
            <thead class="table-light">
              <tr><th>Term</th><th class="text-end">Students</th></tr>
            </thead>
            <tbody>
              {% for row in students_per_term %}
                <tr>
                  <td>{{ row.term|default:"—" }}</td>
                  <td class="text-end">{{ row.n_students }}</td>
                </tr>
              {% empty %}
                <tr><td colspan="2" class="text-muted"><em>No term data.</em></td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <hr class="my-4">

  <!-- Optional: Add chart image for visual explanation -->
  <div class="card mt-3">
    <div class="card-header py-2"><strong>Bar Chart: Students per Section</strong></div>
    <div class="card-body text-center">

        <!-- Here, using the 'url' tag, I'm directly referencing the chart projected at a url -->
      <img src="{% url 'chart-sections' %}" alt="Students per section chart"
           class="img-fluid" style="max-width: 480px;">

    </div>
  </div>
{% endblock %}